defmodule SICP.Ch1.Ex13 do
  @moduledoc """
  Task:

  Prove that `Fib(n)` is the closest integer to `φⁿ/√5`, where `φ = (1 + √5)/2`.

  Hint: Let `ψ = (1 - √5)/2`. Use induction and the definition of the Fibonacci
  numbers (see section 1.2.2) to prove that `Fib(n) = (φⁿ - ψⁿ)/√5`.

  Answer:

  ```
           |> 0                        if n = 0
           |  ---------------------------------
  Fib(n) = |> 1                        if n = 1
           |  ---------------------------------
           |> Fib(n - 1) + Fib(n - 2) otherwise
  ```

  ```

  ---------------------------------------------
  CASE 1: Fib(n) = 0 if n = 0

           φ^0 - ψ^0
  Fib(0) = ---------
               √5

      1 - 1
  0 = -----
       √5

       0
  0 = ---
      √5

  0 = 0

  Proved: Fib(n) == 0 if n == 0
  ---------------------------------------------


  ---------------------------------------------
  CASE 2: Fib(n) = 1 if n = 1

           φ^1 - ψ^1
  Fib(1) = ---------
              √5

      1 + √5   1 - √5
      ------ - ------
        2        2
  1 = ---------------
            √5

       1 + √5   1 - √5
  √5 = ------ - ------
         2        2

  2√5 = 1 + √5 - 1 + √5

  2√5 = 2√5

  Proved: Fib(n) = 1 if n = 1
  ---------------------------------------------


  ---------------------------------------------
  CASE 3: Fib(n) = Fib(n - 1) + Fib(n - 2)

  φ^n - ψ^n   φ^n-1 - ψ^n-1   φ^n-2 - ψ^n-2
  --------- = ------------- + -------------
     √5             √5              √5

  φ^n - ψ^n = φ^n-1 - ψ^n-1 + φ^n-2 - ψ^n-2

  φ^n - φ^n-1 - φ^n-2 = ψ^n - ψ^n-1 - ψ^n-2

  φ^n+2 - φ^n+1 - φ^n   ψ^n+2 - ψ^n+1 - ψ^n
  ------------------- = -------------------
          φ^2                   ψ^2

  φ^n(φ^2 - φ - 1)   ψ^n(ψ^2 - ψ - 1)
  ---------------- = ----------------
         φ^2               ψ^2

  φ^2 - φ - 1 = 0 when φ = (1 + √5)/2
  ψ^2 - ψ - 1 = 0 when ψ = (1 - √5)/2

  φ^n * 0   ψ^n * 0
  ------- = -------
    φ^2       ψ^2

  0 = 0

  Proved: Fib(n) = Fib(n - 1) + Fib(n - 2)
  ---------------------------------------------
  ```
  """
end
